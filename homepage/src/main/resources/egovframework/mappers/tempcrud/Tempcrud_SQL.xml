<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.let.tempcrud.service.impl.TempcrudMapper">

	<resultMap id="temp" type="egovframework.let.tempcrud.service.TempcrudVO">
		<result property="crudId" column="CRUD_ID"/>
		<result property="crudSj" column="CRUD_SJ"/>
		<result property="crudCn" column="CRUD_CN"/>
		<result property="userNm" column="USER_NM"/>
		<result property="frstRegist" column="FRST_REGIST_PNTTM"/>
		<result property="date" column="DATE_FORMAT"/>
		
	</resultMap>
	
	<select id="selectTemp" resultType="egovframework.let.tempcrud.service.TempcrudVO">
		SELECT
			CRUD_ID AS CrudId
			, CRUD_SJ AS CrudSj
			, CRUD_CN AS CrudCn
			, USER_NM AS UserNm
			, DATE_FORMAT(SYSDATE(),'%Y-%m-%d') AS FrstRegist
			FROM letcrud
			WHERE CRUD_ID = #{crudId}
	</select>
	
	<select id="selectTempList" resultType="egovMap">
		SELECT
			CRUD_ID
			, CRUD_SJ
			, USER_NM
			, DATE_FORMAT(SYSDATE(),'%Y-%m-%d') as date
			FROM letcrud
			ORDER BY CRUD_ID DESC
			LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<insert id='insertTemp' parameterType="egovframework.let.tempcrud.service.TempcrudVO">
		INSERT INTO letcrud(
			CRUD_ID
			, CRUD_SJ
			, CRUD_CN
			, USER_NM
			, FRST_REGIST_PNTTM
			) VALUES (
				#{crudId}
				, #{crudSj}
				, #{crudCn}
				, #{userNm}
				, (SELECT DATE_FORMAT(SYSDATE(),'%Y-%m-%d'))
			)
	</insert>
	
	<update id="updateTemp" parameterType="egovframework.let.tempcrud.service.TempcrudVO">
		UPDATE letcrud SET
		 CRUD_SJ = #{crudSj}
		 , USER_NM = #{userNm}
		 , CRUD_CN = #{crudCn}
		WHERE CRUD_ID = #{crudId}
	
	</update>
	
	<delete id="deleteTemp" parameterType="egovframework.let.tempcrud.service.TempcrudVO">
		DELETE FROM letcrud
		WHERE CRUD_ID = #{crudId}
	</delete>
	
	<select id="selectTempListCnt" resultType="java.lang.Integer">
		SELECT
			COUNT(*) CNT
			FROM letcrud
	</select>
	
	
	
</mapper>