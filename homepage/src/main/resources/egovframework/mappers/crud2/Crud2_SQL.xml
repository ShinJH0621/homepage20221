<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="egovframework.let.crud2.service.impl.Crud2Mapper">

	<resultMap id="crud2" type="egovframework.let.crud2.service.Crud2VO">
		<result property="crudId" column="CRUD_ID"/>
		<result property="crudSj" column="CRUD_SJ"/>
		<result property="crudCn" column="CRUD_CN"/>
		<result property="userNm" column="USER_NM"/>
		<result property="frstRegistPnttm" column="FRST_REGIST_PNTTM"/>
		
		
	</resultMap>
	
	<select id="selectCrud2" resultMap="crud2">
		SELECT
			CRUD_ID 
			, CRUD_SJ 
			, CRUD_CN 
			, USER_NM 
			, FRST_REGIST_PNTTM
			FROM letcrud2
			WHERE CRUD_ID = #{crudId}
	</select>
	
	<select id="selectCrud2List" resultType="egovMap">
		SELECT
			CRUD_ID
			, CRUD_SJ
			, USER_NM
			, DATE_FORMAT(FRST_REGIST_PNTTM,'%Y-%m-%d') as FRST_REGIST_PNTTM
			FROM letcrud2
			ORDER BY CRUD_ID DESC
			LIMIT #{recordCountPerPage} OFFSET #{firstIndex}
	</select>
	
	<insert id='insertCrud2' parameterType="crud2VO">
		INSERT INTO letcrud2(
			CRUD_ID
			, CRUD_SJ
			, CRUD_CN
			, USER_NM
			, FRST_REGIST_PNTTM
			) VALUES (
				#{crudId}
				, #{crudSj}
				, #{crudCn}
				, #{userNm}
				, (SELECT DATE_FORMAT(SYSDATE(),'%Y-%m-%d'))
			)
	</insert>
	
	<update id="updateCrud2" parameterType="crud2VO">
		UPDATE letcrud2 SET
		 CRUD_SJ = #{crudSj}
		 , USER_NM = #{userNm}
		 , CRUD_CN = #{crudCn}
		WHERE CRUD_ID = #{crudId}
	
	</update>
	
	<delete id="deleteCrud2" parameterType="crud2VO">
		DELETE FROM letcrud2
		WHERE CRUD_ID = #{crudId}
	</delete>
	
	<select id="selectCrud2ListCnt" resultType="java.lang.Integer">
		SELECT
			COUNT(*) CNT
			FROM letcrud2
	</select>
	
	
	
</mapper>